publishMods {
    file = remapJar.archiveFile
    additionalFiles.from(remapSourcesJar.archiveFile)
    changelog = file("latest-changelog.md").text
    type = STABLE
    modLoaders.add("fabric")

    curseforge {
        projectId = "1166675"
        projectSlug = "qualia-carpet-addition"
        accessToken = providers.environmentVariable("CURSEFORGE_TOKEN")
        requires("fabric-api")
        requires("carpet")
        minecraftVersions.add("1.21.2")
        minecraftVersions.add("1.21.3")
        displayName = rootProject.version
    }
    modrinth {
        projectId = "JyI4tI00"
        accessToken = providers.environmentVariable("MODRINTH_TOKEN")
        requires("fabric-api")
        requires("carpet")
        minecraftVersions.add("1.21.2")
        minecraftVersions.add("1.21.3")
        displayName = rootProject.version
    }
    github {
        repository = "QiuShui1012/Qualia-Carpet-Addition"
        accessToken = providers.environmentVariable("GITHUB_TOKEN")
        commitish = "fabric/1.21.2-1.21.3"
        displayName = project.version
        tagName = project.version
    }
}